import { theme } from "../tailwind.config.js";
import { Meta, Typeset } from "@storybook/addon-docs";
import defaultConfig from "tailwindcss/defaultConfig";
import resolveConfig from "tailwindcss/resolveConfig";

export const tailwindConfig = resolveConfig([theme, defaultConfig])[0];
export const fontSizes = Object.entries(tailwindConfig.fontSize)
  .map(([key, value]) => {
    value = Array.isArray(value) ? value[0] : value;
    if (typeof value === "number") {
      return value;
    }
    if (value.includes("rem")) {
      return Number(value.replace(/rem|px|em/, "") * 16);
    }
    if (value.includes("em")) {
      return Number(value.replace(/rem|px|em/, "") * 16);
    }
    return Number(value.replace(/rem|px|em/, ""));
  })
  .sort((a, b) => a - b)
  .filter((value) => Boolean(value))
  .filter((value, index, array) => array.indexOf(value) === index);

<Meta title="Framework/Typography" />

# Typography

<div>
  {Object.entries(
    tailwindConfig.fontFamily || defaultConfig.theme.fontFamily,
  ).map(([fontName, fontValue]) =>
    Object.entries(
      tailwindConfig.fontWeight || defaultConfig.theme.fontWeight,
    ).map(([weightName, weightValue]) => (
      <div key={fontName + weightName}>
        <h2>
          {fontValue[0]} {weightName}
        </h2>
        <Typeset
          fontSizes={fontSizes}
          fontWeight={weightValue}
          sampleText="Lorem ipsum dolor sit amet, consectetur adipiscing elit."
          fontFamily={fontValue}
        />
      </div>
    )),
  )}
</div>
